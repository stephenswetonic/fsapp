<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=7">
        <title>FS Main</title>

        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>

        <script>
            function imgchange(thumbnail){
                var element = document.getElementById("result");
                var src = thumbnail.getAttribute("src");
                element.setAttribute("src", src);
            }
        </script>

<script>
    $(function() {
		$('.pop').on('click', function() {
			// $('.imagepreview').attr('src', $(this).find('img').attr('src'));
            var newSrc = $(this).find('img').attr('src');

            console.log(newSrc)
            $('.imagepreview').attr('src', newSrc);
            
			$('#imagemodal').modal('show');   
		});		
});
  </script>

    </head>

    <body>
        <div>
            <ul>
                {% for key, value in taskid_img_dict.items %} 
                  <li>{{key}} - {{value}}</li>
                {% endfor %}
                </ul>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="images-tab" data-toggle="tab" href="#images" role="tab" aria-controls="images" aria-selected="true">Images</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="filtered-tab" data-toggle="tab" href="#filtered" role="tab" aria-controls="filtered" aria-selected="false">Filtered Images</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="result-tab" data-toggle="tab" href="#result" role="tab" aria-controls="result" aria-selected="false">Result</a>
            </li>
          </ul>

          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="images" role="tabpanel" aria-labelledby="images-tab">
                
                <div class="list-group p-3">
                    {% for image in images %}
                    <li class="list-group-item text-center" style="width: 50%;"><a href="#" class="pop"><img src={{image.image.url}} alt="" id="imageresource" style="max-width: 100%; max-height: 100%;" class="p-3"/></a></li>
                    {% endfor %}
                    
                </div>
                       

            </div>
            <div class="tab-pane fade" id="filtered" role="tabpanel" aria-labelledby="filtered-tab">
                <div class="list-group p-3">
                    {% for filtered_image in filtered_images %}
                    <li class="list-group-item text-center" style="width: 50%;"><a href="#" class="pop"><img src="{{filtered_image}}"  alt="" id="imageresource" style="max-width: 100%; max-height: 100%;" class="p-3"/></a></li>
                    {% endfor %}
                    
                </div>
                
            </div>
            <div class="tab-pane fade" id="result" role="tabpanel" aria-labelledby="result-tab">
                <div class="list-group p-3">
                    <li class="list-group-item text-center" style="width: 50%;"><a href="#" class="pop"><img src="{{result}}"  alt="" id="imageresource" style="max-width: 100%; max-height: 100%;" class="p-3"/></a></li>
                </div>
            </div>

            
            
          </div>

            <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                                    class="sr-only">Close</span></button>
                            <!-- <h4 class="modal-title" id="myModalLabel">Image preview</h4> -->
                        </div>
                        <div class="modal-body">
                            <img src="" class="imagepreview" style="width: 100%; height: 100%;">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div> 


    </body>
</html>